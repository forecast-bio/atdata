# Issue #24: Design Lexicon for Lens transformation records

## REVIEW

This lexicon is still under active development, and we should make a gh issue for the design and end-to-end integration testing of this scheme, to make sure the lexicon design is good.

## Verdict: CLOSE

## Evidence
The `ac.foundation.dataset.lens` lexicon is fully implemented as `LexLensRecord` in the codebase. It supports bidirectional transformations with required `getter_code` and `putter_code` fields, both using `LexCodeReference` which stores repository URL, commit hash, and function path for immutable code references. The design follows the security decision to store code as external repository references rather than inline code. Records include source/target schema references, description, language, and metadata.

## Codebase References
- `src/atdata/atmosphere/_lexicon_types.py` lines 684-751 -- `LexLensRecord` with `to_record()`/`from_record()`
- `src/atdata/atmosphere/_lexicon_types.py` line 722 -- `$type` set to `ac.foundation.dataset.lens`
- `src/atdata/atmosphere/_lexicon_types.py` lines 442-481 -- `LexCodeReference` with repository, commit, path, optional branch
- `src/atdata/atmosphere/_lexicon_types.py` lines 695-705 -- `getter_code` and `putter_code` as required `LexCodeReference` fields
- `src/atdata/atmosphere/lens.py` lines 60-125 -- `LensPublisher.publish()` creates lens records with code references
- `src/atdata/atmosphere/lens.py` lines 127-182 -- `publish_from_lens()` extracts getter/putter from Lens objects
- `src/atdata/atmosphere/lens.py` lines 185-289 -- `LensLoader` with `get()`, `get_typed()`, `list_all()`, `find_by_schemas()`
