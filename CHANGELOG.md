# Changelog

All notable changes to this project will be documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/).

## [Unreleased]

### Added

### Fixed

### Changed
- Adversarial review: Test suite and codebase comprehensive assessment (#181)
- Consolidate test sample type definitions into conftest.py (#184)
- Trim verbose docstrings that restate function signatures (#189)
- Replace assertions with explicit ValueError in Repo.insert (#187)
- Add Redis key prefix constants to eliminate magic strings (#186)
- Convert TODO comments to tracked issues or design notes (#185)
- Add tests for schema_to_type with malformed/edge-case schemas (#183)
- Remove duplicate shard writing logic between Repo.insert and S3DataStore (#182)
- Remove unused Lens import from dataset.py (#188)
- Build comprehensive markdown documentation for atdata (#171)
- Write docs/protocols.md - Abstract protocols reference (#180)
- Write docs/load-dataset.md - HuggingFace-style API (#179)
- Write docs/promotion.md - Local to atmosphere workflow (#178)
- Write docs/atmosphere.md - ATProto publishing and loading (#177)
- Write docs/local-storage.md - LocalIndex, Repo, S3DataStore (#176)
- Write docs/lenses.md - Lens transformations (#175)
- Write docs/datasets.md - Dataset iteration and batching (#174)
- Write docs/packable-samples.md - PackableSample and @packable (#173)
- Write docs/index.md - overview and quick start guide (#172)
- Adversarial review: Post Local-ATProto Reconciliation (#165)
- Add error path tests for Dataset with invalid tar files (#170)
- Convert TODO comment to design note in dataset.py (#169)
- Replace O(nÂ²) string prefix extraction with os.path.commonprefix (#168)
- Remove unused Lens import from dataset.py (#167)
- Extract shared dtype/type conversion to _type_utils.py (#166)
- Local-ATProto Reconciliation Refactor (#111)
- Phase 7: Documentation and Examples (#118)
- Review and update docstrings for new public API (#164)
- Create examples/promote_workflow.py demonstration (#163)
- Create examples/local_workflow.py demonstration (#162)
- Phase 6: Testing (protocols, integration, property tests) (#117)
- Add schema deduplication integration test (#161)
- Add integration test for local to atmosphere round-trip (#160)
- Create test_protocols.py for protocol compliance tests (#159)
- Phase 5: Local to Atmosphere Promotion Workflow (#116)
- Add tests for promote.py (#158)
- Implement schema deduplication helper (#157)
- Create promote.py module with promote_to_atmosphere function (#156)
- Adversarial review: Phase 4 code contraction (#148)
- Simplify _python_type_to_field_type in local.py (#155)
- Clean up unused imports and type: ignore comments (#153)
- Precompile split detection regex patterns (#151)
- Add missing error path tests for invalid msgpack data (#154)
- Remove duplicate S3 write logic between Repo.insert and S3DataStore (#152)
- Remove verbose docstrings that restate function signatures (#150)
- Remove redundant _ensure_good() call in PackableSample.from_data() (#149)
- Phase 4: Integrate with load_dataset() (@handle/dataset resolution) (#115)
- Support auto-type resolution from index schema (#147)
- Add @handle/dataset path resolution (#146)
- Extend load_dataset signature with index parameter (#145)
- Adversarial review: Phase 1 and Phase 2 implementation (#133)
- Phase 3: Implement Concrete Classes (LocalIndex, AtmosphereIndex, S3DataStore) (#114)
- Implement AtmosphereIndex wrapper (#144)
- Implement S3DataStore class (#143)
- Add AbstractIndex protocol methods to Index class (#142)
- Adversarial review: Phase 1 & 2 implementation (#135)
- Add test coverage for _schema_codec utility functions (#141)
- Add missing test for parse_cid with malformed input (#140)
- Merge clean_redis and clean_redis_schemas fixtures (#139)
- Remove redundant return statement in Index.entries (#137)
- DRY: Consolidate Redis deserialization in Index.entries vs LocalDatasetEntry.from_redis (#138)
- Remove unused _decode_bytes_dict function from local.py (#136)
- Adversarial review: Phase 1 & 2 implementation (#134)
- Phase 2: Align Local with ATProto Record Formats (#113)
- Add schema storage to local (LocalSchemaRecord in Redis) (#128)
- Rename BasicIndexEntry to LocalDatasetEntry and implement IndexEntry protocol (#127)
- Rename Index to LocalIndex and implement AbstractIndex protocol (#129)
- Update Repo to use new LocalIndex API (#130)
- Update test_local.py for renamed classes and new API (#131)
- Add libipld dependency for CID generation (#132)
- Phase 2: Refactor local.py to use new protocols (#113)
- Add CID utilities module (_cid.py) with ATProto-compatible CID generation (#132)
- Rename BasicIndexEntry to LocalDatasetEntry with CID + name dual identity (#127)
- Add LocalIndex alias for Index class (#129)
- Update Repo.insert() to require name parameter (#130)
- Update test_local.py for new LocalDatasetEntry API (#131)
- Revise AbstractIndex: Remove single-type generic, add schema decoding (#123)
- Implement dynamic PackableSample class generation from schema (#126)
- Add decode_schema() method to AbstractIndex (#125)
- Remove generic type parameter from AbstractIndex (#124)
- Phase 1: Define Abstract Protocols (_protocols.py) (#112)
- Export protocols from __init__.py (#122)
- Define AbstractDataStore protocol (#121)
- Define AbstractIndex protocol (#120)
- Define IndexEntry protocol (#119)
- Review ATProto vs Local integration architecture convergence (#110)
- Add HuggingFace Datasets-style API to atdata (#103)
- Support streaming mode parameter (#108)
- Add split parameter handling (train/test/validation) (#107)
- Implement path/URL resolution and shard discovery (#106)
- Add DatasetDict class for multi-split datasets (#105)
- Implement load_dataset() entry point function (#104)
- Write test suite for _hf_api.py module (#109)
- Investigate test-bucket directory creation issue (#105)
- Add remaining Dataset edge case tests (#104)
- Improve test coverage for edge cases (#103)
- Phase 1: Lexicon Design & Schema Definition (#17)
